!function(){"use strict";angular.module("MusicSearch",["angular-loading-bar","ngAnimate","ngSanitize","ui.router","ngStorage","ngFx","ui.bootstrap"])}(),function(){"use strict";angular.module("MusicSearch").config(["cfpLoadingBarProvider",function(t){}]).constant("Constants",{DEFAULT_DEBOUNCE_TIME:800,DEFAULT_TYPEHEAD_ITEM:6})}(),function(){"use strict";function t(t){var e="https://api.spotify.com";return{ENDPOINT:e,searchTypes:["album","artist","playlist","track"],search:function(a,r,n,i){i=i||20,n=n||0,r+="*";var c={limit:i,offset:n,q:r,type:a.join(",")};return t.get(e+"/v1/search",{params:c})},getAlbums:function(a){var r=e+"/v1/artists/"+a+"/albums?limit=15";return t.get(r)}}}angular.module("MusicSearch").factory("Spotify",t),t.$inject=["$http"]}(),function(){"use strict";function t(){return{restrict:"E",scope:{data:"=",currentPage:"="},templateUrl:"views/directives/albums.directive.html",controller:e}}function e(t,e){function a(){console.log("Page changed to: "+t.paginator.currentPage);var a=angular.copy(t.paginator.currentPage);t.fetching=!0;var r=t.data.limit*a,n=t.data.search;e.search(["album"],n,r,t.data.limit).then(function(e){t.fetching=!1,console.log(e),t.data=e.data.albums,t.data.search=n,t.paginator.currentPage=a,t.currentPage=e.data.albums.offset},function(e){console.error(e),t.fetching=!1})}t.currentPage=t.data.offset+t.data.items.length,console.log("album directive",t.data),t.paginator={total:t.data.total,maxSize:9,currentPage:1,pageChanged:a},t.fetching=!1}angular.module("MusicSearch").directive("albums",t),e.$inject=["$scope","Spotify"]}(),function(){"use strict";function t(){return{restrict:"E",scope:{data:"=",currentPage:"="},templateUrl:"views/directives/artists.directive.html",controller:e}}function e(t,e,r){function n(){console.log("Page changed to: "+t.paginator.currentPage);var e=angular.copy(t.paginator.currentPage);t.fetching=!0;var a=t.data.limit*e,n=t.data.search;r.search(["artist"],n,a,t.data.limit).then(function(a){t.fetching=!1,console.log(a),t.data=a.data.artists,t.data.search=n,t.paginator.currentPage=e,t.currentPage=a.data.artists.offset},function(e){console.error(e),t.fetching=!1})}function i(t){e.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"artist.album.html",controller:a,controllerAs:"artistAlbumCtrl",size:"lg",backdrop:!1,resolve:{artist:t}})}t.currentPage=t.data.offset+t.data.items.length,console.log("artist directive",t.data),t.openAlbums=i,t.paginator={total:t.data.total,maxSize:9,currentPage:1,pageChanged:n},t.fetching=!1}function a(t,e,a){function r(){e.dismiss("cancel")}var n=this;n.artist=t,n.loading=!1,n.cancel=r,n.albums={},function(){n.loading=!0,a.getAlbums(n.artist.id).then(function(t){n.loading=!1,console.log(t),n.albums=t.data},function(t){console.error(t),n.loading=!1})}()}angular.module("MusicSearch").directive("artists",t),e.$inject=["$scope","$uibModal","Spotify"],a.$inject=["artist","$uibModalInstance","Spotify"]}(),function(){"use strict";function t(t,e,a,r){function n(t,e){console.log(t,o.selected_filter.indexOf(e)),t?o.selected_filter.push(e):o.selected_filter.splice(o.selected_filter.indexOf(e),1)}function i(t){if(t)return e.search(["album"],t,0,a.DEFAULT_TYPEHEAD_ITEM).then(function(t){return t.data.albums.items.map(function(t){return{name:t.name,image:t.images[2]}})})}function c(t){t&&""!==t&&(o.searching=!0,e.search(o.selected_filter,t).then(function(e){o.searching=!1,console.log(e),angular.forEach(o.search_result,function(a,r){o.search_result[r]=e.data[r],o.search_result[r]&&(o.search_result[r].search=t)})},function(t){console.error(t),o.searching=!1}))}var o=this;console.log("am here"),o.selected_filter=["artist","album"],o.search_types=e.searchTypes,o.updateSelectedTypes=n,o.search=c,o.searching=!1,o.getSuggestion=i,o.search_result={albums:void 0,artists:void 0,playlists:void 0,tracks:void 0}}angular.module("MusicSearch").controller("MainController",t),t.$inject=["$scope","Spotify","Constants","$timeout"]}();